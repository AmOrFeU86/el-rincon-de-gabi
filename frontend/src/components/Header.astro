---
const navItems = [
  { href: '/', label: 'Inicio' },
  { href: '/#temas', label: 'Temas' },
];
---

<header class="header-glass border-b border-gray-700/50 sticky top-0 z-50">
  <nav class="max-w-6xl mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <a href="/" class="flex items-center gap-3 group">
        <div class="logo-container relative w-12 h-12" data-logo>
          <div class="absolute inset-0 bg-gradient-to-br from-primary-500/20 to-accent-500/20 rounded-full blur-md group-hover:blur-lg transition-all duration-500 animate-pulse-slow"></div>
          <div class="relative w-12 h-12 bg-gradient-to-br from-primary-500 to-accent-500 rounded-full flex items-center justify-center shadow-lg shadow-primary-500/30 border border-primary-400/30 group-hover:shadow-primary-500/50 group-hover:scale-105 transition-all duration-300">
            <svg class="w-7 h-7 text-white logo-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
              <!-- Red neuronal periférica -->
              <circle cx="6" cy="6" r="1.2" fill="currentColor" opacity="0.6" />
              <circle cx="18" cy="6" r="1.2" fill="currentColor" opacity="0.6" />
              <circle cx="6" cy="18" r="1.2" fill="currentColor" opacity="0.6" />
              <circle cx="18" cy="18" r="1.2" fill="currentColor" opacity="0.6" />

              <!-- Conexiones al ojo central -->
              <line x1="7" y1="7" x2="10" y2="10" stroke-linecap="round" opacity="0.4" />
              <line x1="17" y1="7" x2="14" y2="10" stroke-linecap="round" opacity="0.4" />
              <line x1="7" y1="17" x2="10" y2="14" stroke-linecap="round" opacity="0.4" />
              <line x1="17" y1="17" x2="14" y2="14" stroke-linecap="round" opacity="0.4" />

              <!-- Ojo central vigilante -->
              <g class="logo-eye" data-eye style="transform-origin: 12px 12px;">
                <!-- Base del ojo (esclera) -->
                <ellipse cx="12" cy="12" rx="4" ry="4.5" fill="white" opacity="0.95" />

                <!-- Iris (cyan/primary gradient) -->
                <circle cx="12" cy="12" r="2.5" fill="url(#iris-gradient)" />

                <!-- Pupila que se mueve -->
                <circle class="pupil" cx="12" cy="12" r="1.3" fill="#1a1a2e" />

                <!-- Destello de luz (da vida) -->
                <circle cx="11.2" cy="11.2" r="0.5" fill="white" opacity="0.9" />

                <!-- Contorno del ojo -->
                <ellipse cx="12" cy="12" rx="4" ry="4.5" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" />
              </g>

              <!-- Aura exterior -->
              <circle cx="12" cy="12" r="10" stroke-dasharray="2 3" opacity="0.3" />

              <!-- Gradiente para el iris -->
              <defs>
                <radialGradient id="iris-gradient">
                  <stop offset="0%" style="stop-color:#22d3ee;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                </radialGradient>
              </defs>
            </svg>
          </div>
        </div>
        <div class="flex flex-col">
          <span class="text-xl font-bold text-white group-hover:text-primary-400 transition-colors">
            El Rincón de Gabi
          </span>
          <span class="text-[10px] text-cyan-400/80 font-medium tracking-wider uppercase">
            Agentes de IA
          </span>
        </div>
      </a>

      <ul class="flex items-center gap-6">
        {navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="text-gray-300 hover:text-primary-400 transition-colors font-medium"
            >
              {item.label}
            </a>
          </li>
        ))}
        <li>
          <a
            href="https://youtube.com/@amorfeu86"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
            YouTube
          </a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<style>
  .header-glass {
    background: rgba(17, 24, 39, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: all 0.3s ease;
  }

  .header-glass.scrolled {
    background: rgba(17, 24, 39, 0.85);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
  }

  /* Animación de pulso lento para el glow */
  @keyframes pulse-slow {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.6;
      transform: scale(1.05);
    }
  }

  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }

  /* Animación de entrada "despertar" */
  @keyframes wake-up {
    0% {
      opacity: 0;
      transform: scale(0.8) rotate(-10deg);
    }
    60% {
      transform: scale(1.05) rotate(5deg);
    }
    100% {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
  }

  .logo-container {
    animation: wake-up 0.8s ease-out;
  }

  /* Efecto sutil en el ojo */
  .logo-eye {
    transition: transform 0.2s ease-out;
  }

  .logo-icon {
    overflow: visible;
  }

  .logo-container {
    overflow: visible;
  }

  .logo-eye .pupil {
    filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.8));
  }

  /* Brillo en el ojo cuando está activo */
  .group:hover .logo-eye .pupil {
    filter: drop-shadow(0 0 4px rgba(255, 255, 255, 1));
  }

  /* Efecto de "scanning" en el círculo exterior */
  .logo-icon circle:last-child {
    stroke-dasharray: 2 3;
    animation: rotate-dash 8s linear infinite;
  }

  @keyframes rotate-dash {
    0% {
      stroke-dashoffset: 0;
    }
    100% {
      stroke-dashoffset: 30;
    }
  }
</style>

<script>
  const header = document.querySelector('.header-glass');
  const logoContainer = document.querySelector('[data-logo]');
  const logoEye = document.querySelector('[data-eye]');

  let isNearLogo = false;

  // Scroll effect
  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      header?.classList.add('scrolled');
    } else {
      header?.classList.remove('scrolled');
    }
  });

  // Eye tracking effect
  document.addEventListener('mousemove', (e) => {
    if (!logoContainer || !logoEye) return;

    const rect = logoContainer.getBoundingClientRect();
    const logoCenterX = rect.left + rect.width / 2;
    const logoCenterY = rect.top + rect.height / 2;

    // Calcular distancia del cursor al logo
    const distanceX = e.clientX - logoCenterX;
    const distanceY = e.clientY - logoCenterY;
    const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);

    // Detectar desde más lejos (400px)
    const activationRadius = 400;

    if (distance < activationRadius) {
      isNearLogo = true;

      // Calcular ángulo hacia el cursor
      const angle = Math.atan2(distanceY, distanceX) * (180 / Math.PI);

      // Movimiento balanceado - notorio pero contenido dentro del ojo
      const maxMovement = 4; // píxeles máximos que se mueve la pupila
      const movementFactor = Math.min(distance / activationRadius, 1);
      const movement = movementFactor * maxMovement;

      // Aplicar movimiento suave sin salirse del ojo
      logoEye.style.transform = `rotate(${angle}deg) translateX(${movement}px)`;
      logoEye.style.transition = 'transform 0.15s ease-out';
    } else if (isNearLogo) {
      // Volver a la posición original suavemente
      isNearLogo = false;
      logoEye.style.transform = 'rotate(0deg) translateX(0px)';
      logoEye.style.transition = 'transform 0.4s ease-out';
    }
  });

  // Reset cuando el cursor sale de la ventana
  document.addEventListener('mouseleave', () => {
    if (logoEye) {
      logoEye.style.transform = 'rotate(0deg) translateX(0px)';
      logoEye.style.transition = 'transform 0.4s ease-out';
      isNearLogo = false;
    }
  });
</script>
